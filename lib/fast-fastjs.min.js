!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("moment"),require("bluebird"),require("axios"),require("md5"),require("lokijs")):"function"==typeof define&&define.amd?define("fast-fastjs",["moment","bluebird","axios","md5","lokijs"],t):"object"==typeof exports?exports["fast-fastjs"]=t(require("moment"),require("bluebird"),require("axios"),require("md5"),require("lokijs")):e["fast-fastjs"]=t(e.moment,e.bluebird,e.axios,e.md5,e.lokijs)}(window,function(e,t,r,n,a){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=32)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});Object.assign;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var a=function(){var e=function(e,t){try{return e()}catch(e){return t}};return Object.freeze({cloneDeep:function(e){return JSON.parse(JSON.stringify(e))},get:e,orderBy:function(){},isEmpty:function(e){if(!e)return!0;if(Array.isArray(e)||"string"==typeof e)return!e.length;for(var t in e)if(hasOwnProperty.call(e,t))return!1;return!0},debounce:function(e,t){var r=void 0;return function(){var n=this,a=arguments;clearTimeout(r),r=setTimeout(function(){return e.apply(n,a)},t)}},getFromPath:function(t,r,n){var a=r;r.includes(" as ")&&(a=(r=r.split(" as "))[0]);var o=e(function(){return Array.isArray(r)&&r[1].trim()},void 0);var i=a.replace(/\[/g,".").replace(/]/g,"").split(".").filter(Boolean).map(function(e){return e.trim()}).every(function(e){return!(e&&void 0===(t=t[e]))})?t:n;return{label:o||a,value:i}},deleteNulls:function(e){var t=e,r=t instanceof Array;for(var a in t)null===t[a]?r?t.splice(a,1):delete t[a]:"object"===n(t[a])&&(void 0).deleteNulls(t[a]);return t}})}();t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=c(r(4)),o=c(r(2)),i=c(r(0)),u=c(r(3));function c(e){return e&&e.__esModule?e:{default:e}}function s(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(a,o){try{var i=t[a](o),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}("next")})}}t.default=o.default.extend(a.default,{properties:{name:"Configuration",remoteConnection:{baseUrl:"https://ydvahgxgqliaeuf.form.io/",path:"configuration",id:"5b50a6571c8da0f446286093",token:void 0}},methods:{set:function(e){var t=this;return s(regeneratorRuntime.mark(function r(){var n=e.appConf,a=e.forceOnline;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("true"!==String(n.offlineStart)||a){e.next=2;break}return e.abrupt("return",t.setOffline({appConf:n}));case 2:return e.abrupt("return",t.setOnline({appConf:n}));case 3:case"end":return e.stop()}},r,t)}))()},setOffline:function(e){var t=this;return s(regeneratorRuntime.mark(function r(){var a,o,i,c=e.appConf;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.local().first();case 2:if(a=e.sent,o=t.getConfigDate(a),i=c.offlineFiles.lastUpdated.date,!(o>i)){e.next=7;break}return e.abrupt("return",a);case 7:if(!a){e.next=10;break}return e.next=10,t.local().clear({sure:!0});case 10:return e.abrupt("return",t.local().insert(n({},c.offlineFiles.Configuration.data,{fastUpdated:(0,u.default)().unix()})));case 11:case"end":return e.stop()}},r,t)}))()},setOnline:function(e){var t=this;return s(regeneratorRuntime.mark(function r(){var a,o;e.appConf;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.local().first();case 2:return a=e.sent,e.next=5,t.remote().first();case 5:if(o=e.sent,a||o){e.next=8;break}throw new Error("Application is not connected to internet, or the configuration file cannot be pulled");case 8:if(o){e.next=10;break}return e.abrupt("return",a);case 10:if(!a){e.next=13;break}return e.next=13,t.local().clear({sure:!0});case 13:return e.abrupt("return",t.local().insert(n({},o,{fastUpdated:(0,u.default)().unix()})));case 14:case"end":return e.stop()}},r,t)}))()},getConfigDate:function(e){return i.default.get(function(){return e.fastUpdated},0)}}}).compose(o.default.privatize).privatizeMethods("setOnlineConfig","setOfflineConfig","getConfigDate","assingGlobalVariable","getRemote")()},function(e,t,r){"use strict";(function(e,n){Object.defineProperty(t,"__esModule",{value:!0});var a=s(r(15)),o=s(r(39)),i=s(r(5)),u=s(r(40)),c=s(r(47));function s(e){return e&&e.__esModule?e:{default:e}}function l(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var f=(0,a.default)({init:function(){this.registerInternalModels()},properties:{privatize:o.default,defaulLocal:"loki",defaultRemote:"formio",defaultMerged:"formio-loki",connectors:{local:{loki:u.default},remote:{formio:c.default}}},methods:{model:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.registerModel(t),a.default.apply(void 0,l(t))},extend:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.registerModel(t),i.default.apply(void 0,l(t))},compose:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.registerModel(t),i.default.apply(void 0,l(t))},getLocalConnector:function(t){var r=e.env.FLUENT_LOCAL_CONNECTOR||this.defaulLocal;return this.connectors.local[r](t)},getRemoteConnector:function(t){var r=e.env.FLUENT_REMOTE_CONNECTOR||this.defaultRemote;return this.connectors.remote[r](t)},getMergedConnector:function(e){},registerInternalModels:function(){window&&!window._FLUENT_&&(window._FLUENT_={models:{}}),n&&!n._FLUENT_&&(n._FLUENT_={models:{}}),["Submission","Form","Translation","User","Role","Configuration","Pages","DB"].forEach(function(e){window._FLUENT_.models[e]=!0,n._FLUENT_.models[e]=!0})},registerModel:function(e){var t=e&&e[0]&&e[0].properties&&e[0].properties.name?e[0].properties.name:e&&e[1]&&e[1].properties&&e[1].properties.name?e[1].properties.name:void 0;if(t){if("string"!=typeof t)throw new Error("You must assign a name to your Model when using Fluent.compose");"baseModel"!==t&&(window._FLUENT_.models[t]=!0,n._FLUENT_.models[t]=!0)}}}})();t.default=f}).call(this,r(34),r(23))},function(t,r){t.exports=e},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(r(2));t.default=n.default.compose({properties:{name:"baseModel",remoteConnection:{baseUrl:"https://myBaseUrl.com/",path:"/myRemote/model",id:void 0,token:void 0,pullForm:!1}},methods:{getModelName:function(){return this.name},remote:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.token,r=void 0===t?void 0:t,a=e.pullForm,o=void 0===a?void 0:a;return r&&(this.remoteConnection.token=r),o&&(this.remoteConnection.pullForm=o),n.default.getRemoteConnector({remoteConnection:this.remoteConnection})},local:function(){return n.default.getLocalConnector({name:this.name})},merged:function(e){var t=e.token;return this.remoteConnection.token=t,n.default.getMergedConnector({name:this.name,path:this.path})}}}).compose(n.default.privatize)},function(e,t,r){var n=r(24),a=r(16),o=r(9),i=r(25),u=r(35),c=r(26),s=r(27),l=Array.prototype.slice;function f(e,t){var r=function e(t){var r=e.compose||{},n={__proto__:r.methods};if(s(n,r.deepProperties),c(n,r.properties),Object.defineProperties(n,r.propertyDescriptors||{}),!r.initializers||0===r.initializers.length)return n;void 0===t&&(t={});for(var o=r.initializers,i=o.length,u=0;u<i;u+=1){var f=o[u];if(a(f)){var d=f.call(n,t,{instance:n,stamp:e,args:l.apply(arguments)});n=void 0===d?n:d}}return n};e.staticDeepProperties&&s(r,e.staticDeepProperties),e.staticProperties&&c(r,e.staticProperties),e.staticPropertyDescriptors&&Object.defineProperties(r,e.staticPropertyDescriptors);var n=a(r.compose)?r.compose:t;return r.compose=function(){"use strict";return n.apply(this,arguments)},c(r.compose,e),r}function d(e,t,r){if(n(t)){var o=t.length,i=e[r]||[];e[r]=i;for(var u=0;u<o;u+=1){var c=t[u];a(c)&&i.indexOf(c)<0&&i.push(c)}}}function p(e,t,r,n){o(t[r])&&(o(e[r])||(e[r]={}),n(e[r],t[r]))}function h(e,t,r){p(e,t,r,s)}function v(e,t,r){p(e,t,r,c)}function m(e,t){var r=t&&t.compose||t;v(e,r,"methods"),v(e,r,"properties"),h(e,r,"deepProperties"),v(e,r,"propertyDescriptors"),v(e,r,"staticProperties"),h(e,r,"staticDeepProperties"),v(e,r,"staticPropertyDescriptors"),v(e,r,"configuration"),h(e,r,"deepConfiguration"),d(e,r.initializers,"initializers"),d(e,r.composers,"composers")}e.exports=function e(){"use strict";var t={},r=[];u(this)&&(m(t,this),r.push(this));for(var a=0;a<arguments.length;a++){var o=arguments[a];u(o)&&(m(t,o),r.push(o))}var c=f(t,e),s=t.composers;if(n(s)&&s.length>0)for(var l=0;l<s.length;l+=1){var d=(0,s[l])({stamp:c,composables:r});c=i(d)?d:c}return c}},function(e,r){e.exports=t},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){var e=function(e,t){var r=document.createEvent("CustomEvent");return t=t||{bubbles:!1,cancelable:!1,detail:void 0},r.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),r};return Object.freeze({emit:function(t){var r=t.name,n=t.data,a=t.text;if(!r)throw new Error("Event must have a name.");if(!n)throw new Error("Event must have data.");if(!a)throw new Error("Event must have a text.");var o=e(r,{detail:{data:n,text:a}});window.dispatchEvent(o)},listen:function(e){var t=e.name,r=e.callback;if(!t)throw new Error("Listener must have a name.");if(!r)throw new Error("Listener must have a callback.");window.addEventListener(t,r)},remove:function(e){var t=e.name,r=e.callback;if(!t)throw new Error("Listener must have a name to detach");if(!r)throw new Error("Listener must have a callback to detach");window.removeEventListener(t,r)}})}();t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=c(r(18)),a=c(r(1)),o=c(r(0)),i=c(r(4)),u=c(r(2));function c(e){return e&&e.__esModule?e:{default:e}}function s(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(a,o){try{var i=t[a](o),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}("next")})}}t.default=u.default.extend(i.default,{properties:{name:"User",remoteConnection:{baseUrl:"https://vnikkswzjatywzi.form.io/",path:"user",token:void 0},methods:{storeLocally:function(e){var t=this;return s(regeneratorRuntime.mark(function r(){var n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.local().where("data.data.email","=",e.data.email).first();case 2:if(n=r.sent,e=o.default.deleteNulls(e),!(!!n&&!o.default.isEmpty(n))){r.next=7;break}throw new Error("The user email is already taken");case 7:return r.abrupt("return",t.local().insert({data:e}));case 8:case"end":return r.stop()}},r,t)}))()},updateUser:function(e){var t=this;return s(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return e=o.default.deleteNulls(e),r.abrupt("return",t.local().insert({data:e}));case 2:case"end":return r.stop()}},r,t)}))()},login:function(e){var t=this;return s(regeneratorRuntime.mark(function r(){var o,i=e.credentials,u=e.role;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.default.local().first();case 2:return o=e.sent.baseURL,o+="admin"===u?"/admin/login":"/user/login",e.abrupt("return",n.default.post(o,{data:{email:i.username,password:i.password}}));case 5:case"end":return e.stop()}},r,t)}))()}}}})()},function(e,t){e.exports=function(e){var t=typeof e;return Boolean(e)&&("object"===t||"function"===t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(r(7)),a=o(r(6));function o(e){return e&&e.__esModule?e:{default:e}}var i=function(){var e=window.navigator.onLine;return Object.freeze({isOnline:function(){return new a.default(function(e,t){var r=XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHttp");r.onload=function(){e(!0)},r.onerror=function(t){e(!1)},r.open("GET","https://yesno.wtf/api",!0),r.send()})},initEventListeners:function(){n.default.listen({name:"online",callback:function(){console.log("App is now online"),e||(e=!0,n.default.emit({name:"FAST:CONNECTION:ONLINE",data:e,text:"Application is now online"}))}}),n.default.listen({name:"offline",callback:function(){console.log("App is now offline"),e&&(e=!1,n.default.emit({name:"FAST:CONNECTION:OFFLINE",data:e,text:"Application is now offline"}))}})}})}();t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(3)),a=s(r(0)),o=s(r(4)),i=s(r(2)),u=s(r(48)),c=s(r(1));function s(e){return e&&e.__esModule?e:{default:e}}function l(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(a,o){try{var i=t[a](o),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}("next")})}}t.default=i.default.extend(o.default,{properties:{name:"Form",remoteConnection:{baseUrl:"https://vnikkswzjatywzi.form.io/",path:"form",pullForm:!0}},methods:{getModel:function(e){var t=e.path;e.name;return i.default.extend(o.default,{properties:{name:"name",remoteConnection:{baseUrl:"https://vnikkswzjatywzi.form.io/",path:t}}}).compose(i.default.privatize)()},cardFormattedForms:function(e){var t=this;return l(regeneratorRuntime.mark(function r(){var a;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.local().find();case 2:return a={cards:a=(a=(a=(a=r.sent).filter(function(e){return e.data.tags.indexOf("visible")>-1})).sort(function(e,t){return(e=e.data.title)>(t=t.data.title)?1:e<t?-1:0})).map(function(t){return{title:t.data.title,tags:t.data.tags,customIcon:!0,icon:"create"===e?"statics/customSVG/startSurvey.svg":"statics/customSVG/collectedData.svg",subtitle:"Last updated: "+(0,n.default)(t.data.modified).fromNow(),actions:[{text:"create"===e?"Start":"View data",target:"form",view:e,path:t.data.path}]}})},r.abrupt("return",a);case 8:case"end":return r.stop()}},r,t)}))()},labels:function(){var e=this;return l(regeneratorRuntime.mark(function t(){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.local().get();case 2:return r=t.sent,t.abrupt("return",(0,u.default)(r));case 4:case"end":return t.stop()}},t,e)}))()},getUpdatedAt:function(e){return a.default.get(function(){return e[0].fastUpdated},0)},setOffline:function(e){var t=this;return l(regeneratorRuntime.mark(function r(){var o,i,u,s,f=e.appConf;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.local().get();case 2:return o=e.sent,i=t.getUpdatedAt(o),e.next=6,c.default.local().first();case 6:if(u=e.sent,s=a.default.get(function(){return f.offlineFiles.Forms}),!(u.fastUpdated<i)){e.next=10;break}return e.abrupt("return",o);case 10:if(!o){e.next=13;break}return e.next=13,t.local().clear({sure:!0});case 13:return s.forEach(function(){var e=l(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.local().insert({data:r,fastUpdated:(0,n.default)().unix()});case 2:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}()),e.abrupt("return",s);case 15:case"end":return e.stop()}},r,t)}))()},setOnline:function(){var e=this;return l(regeneratorRuntime.mark(function t(){var r,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.remote().get();case 2:if(r=t.sent,o=(0,n.default)().unix(),!r||a.default.isEmpty(r)){t.next=8;break}return t.next=7,e.local().clear({sure:!0});case 7:r.forEach(function(){var e=l(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.local().insert({data:t,fastUpdated:o});case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}());case 8:case"end":return t.stop()}},t,e)}))()},set:function(e){var t=this;return l(regeneratorRuntime.mark(function r(){var n=e.appConf,a=e.forceOnline;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("true"!==n.offlineStart||a){e.next=2;break}return e.abrupt("return",t.setOffline({appConf:n}));case 2:return e.abrupt("return",t.setOnline());case 3:case"end":return e.stop()}},r,t)}))()}}})()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=c(r(0)),a=c(r(4)),o=c(r(2)),i=c(r(1)),u=c(r(3));function c(e){return e&&e.__esModule?e:{default:e}}function s(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(a,o){try{var i=t[a](o),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}("next")})}}t.default=o.default.extend(a.default,{properties:{name:"Translation",remoteConnection:{baseUrl:"https://vnikkswzjatywzi.form.io/",path:"translations",token:void 0}},methods:{getFormTranslations:function(){var e=this;return s(regeneratorRuntime.mark(function t(){var r,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r={},t.next=3,e.local().first();case 3:return a=t.sent,a=n.default.get(function(){return a.data},{}),Object.keys(a).forEach(function(e){"type"!==e&&(r[e]=a[e])}),t.abrupt("return",r);case 7:case"end":return t.stop()}},t,e)}))()},supportedLanguages:function(){var e=this;return s(regeneratorRuntime.mark(function t(){var r,a,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.local().find();case 2:if(0!==(r=t.sent).length){t.next=5;break}return t.abrupt("return",[]);case 5:return a=e.getIsoLanguages(),o=[],r=n.default.get(function(){return r[0].data},[]),Object.keys(r).forEach(function(e){var t=a.find(function(t){return t.code===e});t&&o.push(t)}),o=o.sort(function(e,t){return(e=e.label)>(t=t.label)?1:e<t?-1:0}),t.abrupt("return",o);case 11:case"end":return t.stop()}},t,e)}))()},getIsoLanguages:function(){return r(49)},getLocalizationDate:function(e){return n.default.get(function(){return e[0].fastUpdated},0)},set:function(e){var t=this;return s(regeneratorRuntime.mark(function r(){var n=e.appConf,a=e.forceOnline;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("true"!==n.offlineStart||a){e.next=2;break}return e.abrupt("return",t.setOffline({appConf:n}));case 2:return e.abrupt("return",t.setOnline({appConf:n}));case 3:case"end":return e.stop()}},r,t)}))()},setOffline:function(e){var t=this;return s(regeneratorRuntime.mark(function r(){var n,a,o,u,c,s=e.appConf;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.local().get();case 2:return n=e.sent,a=t.getLocalizationDate(n),e.next=6,i.default.local().first();case 6:if(o=e.sent,u=s.offlineFiles.Translations,!(o.fastUpdated<a)){e.next=10;break}return e.abrupt("return",n[0].data);case 10:return e.next=12,t.process(u);case 12:return c=e.sent,e.abrupt("return",t.storeTranslations(c));case 14:case"end":return e.stop()}},r,t)}))()},setOnline:function(e){var t=this;return s(regeneratorRuntime.mark(function r(){var n,a;e.appConf;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.local().get();case 2:return n=e.sent,e.next=5,t.remote().limit(5e4).get();case 5:if(!(a=e.sent)){e.next=14;break}return e.next=9,t.process(a);case 9:return a=e.sent,e.next=12,t.storeTranslations(a);case 12:return a=e.sent,e.abrupt("return",a);case 14:if(!(n.length>0&&n[0].data)){e.next=16;break}return e.abrupt("return",n[0].data);case 16:case"end":return e.stop()}},r,t)}))()},storeTranslations:function(e){var t=this;return s(regeneratorRuntime.mark(function r(){var n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t.local().clear({sure:!0}),r.next=3,t.local().insert({data:e,fastUpdated:(0,u.default)().unix()});case 3:return n=r.sent,r.abrupt("return",n.data);case 5:case"end":return r.stop()}},r,t)}))()},process:function(e){var t=this;return s(regeneratorRuntime.mark(function r(){var n,a;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.local().getIsoLanguages(),(a={}).label={},n.forEach(function(t){e.forEach(function(e,r){e.data&&e.data[t.code]&&(a[t.code]||(a[t.code]={}),a[t.code][e.data.label]=e.data[t.code]),e.data&&e.data.label&&(a.label[e.data.label]=e.data.label)})}),r.abrupt("return",a);case 5:case"end":return r.stop()}},r,t)}))()}}})()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=d(r(1)),a=d(r(20)),o=d(r(8)),i=d(r(8)),u=d(r(10)),c=d(r(31)),s=d(r(21)),l=d(r(6)),f=d(r(0));function d(e){return e&&e.__esModule?e:{default:e}}function p(e){return function(){var t=e.apply(this,arguments);return new l.default(function(e,r){return function n(a,o){try{var i=t[a](o),u=i.value}catch(e){return void r(e)}if(!i.done)return l.default.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}("next")})}}var h=function(){var e=function(){var e=p(regeneratorRuntime.mark(function e(t){var r,i,u,c,s,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.username,i=t.password,e.next=3,n.default.getLocal();case 3:return u=e.sent,c=(0,a.default)(i,u.MD5_KEY),e.next=7,o.default.local().find({"data.data.email":r});case 7:if(s=e.sent,l=s&&s[0]?s[0]:void 0,console.log("user",l),l){e.next=12;break}throw new Error;case 12:if(l.data.data.hashedPassword===c){e.next=15;break}throw new Error;case 15:return e.abrupt("return",l);case 16:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t=function(e,t,r){return i.default.login({credentials:e,role:r}).then(function(e){var t=e.data;return i.default.updateUser(t),e})},r=function(){var r=p(regeneratorRuntime.mark(function r(n,a,o){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,u.default.isOnline();case 2:if(!r.sent){r.next=5;break}return r.abrupt("return",t(n,0,o));case 5:return r.abrupt("return",e(n,a));case 6:case"end":return r.stop()}},r,this)}));return function(e,t,n){return r.apply(this,arguments)}}(),d=function(e){var t=JSON.parse(localStorage.getItem("authUser"));return void 0!==(t=null!==t&&t).rolesNames.find(function(t){return t.title===e})},v=function(){var e=p(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&!f.default.isEmpty(t)){e.next=2;break}return e.abrupt("return",!0);case 2:return e.next=4,s.default.getLocal();case 4:return r=e.sent,n=t.reduce(function(e,t){return Object.keys(r).forEach(function(n){r[n]&&r[n]._id&&r[n]._id===t&&e.push(r[n].title)}),e},[]),e.abrupt("return",n.some(function(e){return d(e)||"Authenticated"===e}));case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=p(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localStorage.removeItem("authUser");case 2:return e.next=4,localStorage.removeItem("formioToken");case 4:return e.next=6,localStorage.removeItem("formioUser");case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}();return Object.freeze({user:function(){try{var e=JSON.parse(localStorage.getItem("authUser"));return null!==e&&e}catch(e){return localStorage.removeItem("authUser"),!1}},email:function(){var e="";return h.user()&&h.user().data&&h.user().data.email?e=h.user().data.email:h.user()&&h.user().email&&(e=h.user().email),e},hasRoleIn:function(e){return!(e&&!f.default.isEmpty(e))||e.some(function(e){return d(e)||"Authenticated"===e})},hasRoleIdIn:v,hasRole:d,check:function(){var e=JSON.parse(localStorage.getItem("authUser"));return!!e&&!!e.x_jwt_token},logOut:m,attempt:function(e,t,n){var a=this;return n=n||"user",new l.default(function(o,i){r(e,t,n).then(function(){var e=p(regeneratorRuntime.mark(function e(t){var r,n,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.headers||{},(n=t.data).x_jwt_token=r["x-jwt-token"],localStorage.setItem("authUser",JSON.stringify(n)),localStorage.setItem("formioToken",r["x-jwt-token"]),e.next=7,c.default.local().find();case 7:i=(i=e.sent)[0],n.rolesNames=[],Object.keys(i).forEach(function(e){"$loki"!==e&&"_id"!==e&&"meta"!==e&&n.roles&&-1!==n.roles.indexOf(i[e]._id)&&n.rolesNames.push(i[e])}),localStorage.setItem("authUser",JSON.stringify(n)),o(n);case 13:case"end":return e.stop()}},e,a)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){console.log("There was an error over here!"),i(e)})})}})}();t.default=h},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=l(r(13)),o=l(r(3)),i=l(r(0)),u=l(r(11)),c=l(r(4)),s=l(r(2));function l(e){return e&&e.__esModule?e:{default:e}}function f(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(a,o){try{var i=t[a](o),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}("next")})}}t.default=s.default.extend(c.default,{properties:{name:"Submission",remoteConnection:void 0},methods:{get:function(e){var t=this;return f(regeneratorRuntime.mark(function r(){var n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return e=e.replace(/\s/g,""),r.next=3,t.local().find({filter:{_id:e}});case 3:if(!((n=r.sent).length>0)){r.next=6;break}return r.abrupt("return",n[0]);case 6:return r.abrupt("return",{data:!1});case 7:case"end":return r.stop()}},r,t)}))()},offline:function(e){var t=this;return f(regeneratorRuntime.mark(function r(){var n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.find({"data.user_email":a.default.email(),"data.formio.formId":e});case 2:return n=(n=(n=r.sent).filter(function(e){return!1===e.data.sync||!1===e.data.draft})).sort(function(e,t){return(e=new Date(e.data.created))>(t=new Date(t.data.created))?-1:e<t?1:0}),r.abrupt("return",n);case 6:case"end":return r.stop()}},r,t)}))()},stored:function(e){var t=this;return f(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",t.find({"data.formio.formId":e,"data.owner":a.default.user()._id}));case 1:case"end":return r.stop()}},r,t)}))()},getUnsync:function(){var e=this;return f(regeneratorRuntime.mark(function t(){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.find({"data.sync":!1});case 2:return r=(r=(r=t.sent).filter(function(e){return!1===e.data.sync&&!1===e.data.draft&&e.data.user_email===a.default.email()&&!e.data.queuedForSync&&!e.data.syncError})).sort(function(e,t){return(e=new Date(e.data.created))>(t=new Date(t.data.created))?-1:e<t?1:0}),t.abrupt("return",r);case 6:case"end":return t.stop()}},t,e)}))()},showView:function(e){var t=this;return f(regeneratorRuntime.mark(function r(){var n,a,c,s,l,f,d,p,h,v=e.form,m=e.filter,g=e.limit,b=e.select,y=e.pagination,w=e.populate,x=e.dataExport,k=e.vm;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=y&&y.page||1,a=y&&y.limit||500,c={},s=[],e.next=6,t.find({form:v,limit:g,select:b,pagination:y,filter:m,populate:w});case 6:if(s=e.sent,s=(s=i.default.cloneDeep(s)).map(function(e){if(e._id&&e._id.indexOf("_local")>=0&&(e.data._lid=e._id),e.data&&!e.data._id&&(e.data._id=e._id),e.data&&!e.data.owner&&(e.data.owner=e.owner),e.data&&!e.data.modified&&(e.data.modified=e.modified),x)return e.data&&e.data.owner&&e.data.owner.data&&e.data.owner.data.email&&(e.data.ownerEmail=e.data.owner.data.email),e.data&&e.data.user_email&&(e.data.ownerEmail=e.data.user_email),e.$loki?(e.data.data._id=e._id,e.data.data):e.data;var t=e.data;if(t&&t.data){var r=t.data;delete t.data,t=Object.assign(t,r)}return t}),!x){e.next=11;break}return e.abrupt("return",s);case 11:return a>0&&(l=s.length,f=Math.ceil(l/a),c={total:l,pages:f,currentPage:n,pageLimit:a}),e.next=14,u.default.get(v);case 14:return d=e.sent,p=[],i.default.eachComponent(d.components,function(e){e.properties&&e.properties.FAST_TABLE_TEMPLATE&&p.push({key:e.key,template:e.properties.FAST_TABLE_TEMPLATE})}),s=(s=s.map(function(e){var t={_id:e._id,status:!1===e.sync?"offline":"online",draft:e.draft,HumanUpdated:e.updated?o.default.unix(e.updated).fromNow():(0,o.default)(e.modified).fromNow(),syncError:!!e.syncError&&e.syncError,updated:e.updated?o.default.unix(e.updated).unix():(0,o.default)(e.modified).unix()};return e._lid&&(t._lid=e._lid),p.forEach(function(t){var r=Function("value","data",t.template);try{e[t.key]=r(e[t.key],e)}catch(e){console.log("There is an error on one of your calculations",e)}}),e.dataCollected&&(e.dataCollected.scouting&&e.dataCollected.traps?e.dataCollected=k.$t("Scouting and traps"):e.dataCollected.scouting?e.dataCollected=k.$t("Scouting"):e.dataCollected.traps?e.dataCollected=k.$t("Traps"):e.dataCollected="-"),e.date&&(e.date=(0,o.default)(e.date).format("DD-MM-YYYY HH:mm:ss")),b?(b.forEach(function(r){r=r.replace("data.",""),t[r]=e[r]}),t):t})).sort(function(e,t){return(e=new Date(e.updated))>(t=new Date(t.updated))?-1:e<t?1:0}),h={results:s,pagination:c},e.abrupt("return",h);case 21:case"end":return e.stop()}},r,t)}))()},getParallelParticipants:function(e,t){var r=this;return f(regeneratorRuntime.mark(function n(){var a,o,u,c;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.local().find({filter:{_id:t}});case 2:return a=(a=n.sent)[0],o=(o=i.default.get(function(){return a.data.data.parallelSurvey}))&&"[object Object]"!==o?JSON.parse(o).groupId:void 0,n.next=8,r.local().find({filter:{"data.formio.formId":e}});case 8:return u=n.sent,c=(c=(c=u.filter(function(e){var t=i.default.get(function(){return e.data.data.parallelSurvey});return(t=t&&"[object Object]"!==t?JSON.parse(t).groupId:void 0)&&t===o})).map(function(e){e.data.data.parallelSurvey})).map(function(e){return JSON.parse(e)}),n.abrupt("return",c);case 13:case"end":return n.stop()}},n,r)}))()},getParallelSurvey:function(e){var t=i.default.get(function(){return e.data.data.paraparallelSurvey})||i.default.get(function(){return e.data.parallelSurvey});return t=t&&"[object Object]"!==t?JSON.parse(t):void 0},setParallelSurvey:function(e){return JSON.stringify(e)},getGroups:function(e){var t=this;return f(regeneratorRuntime.mark(function r(){var n,a;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.local().find();case 2:return n=r.sent,n=e?n.filter(function(t){return t.data.formio.formId===e}):n,a=(a=n.map(function(e){return t.local().getParallelSurvey(e)?{groupId:t.local().getParallelSurvey(e).groupId,groupName:t.local().getParallelSurvey(e).groupName}:void 0})).filter(function(e){return void 0!==e}),r.abrupt("return",i.default.uniqBy(a,"groupId"));case 7:case"end":return r.stop()}},r,t)}))()},getGroup:function(e){var t=this;return f(regeneratorRuntime.mark(function r(){var n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.local().getGroups();case 2:return n=(n=r.sent).filter(function(t){return t.groupId===e}),r.abrupt("return",n[0]);case 5:case"end":return r.stop()}},r,t)}))()},removeFromGroup:function(e){var t=this;return f(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,t)}))()},assingToGroup:function(e,t){var r=this;return f(regeneratorRuntime.mark(function a(){var o,i,u,c;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.local().getGroup(t[0]);case 2:return o=a.sent,a.next=5,r.local().get(e);case 5:return i=a.sent,u=r.local().getParallelSurvey(i),c=n({},u,{groupId:o.groupId,groupName:o.groupName}),i.data.data.parallelSurvey=r.local().setParallelSurvey(c),a.next=11,r.local().update(i);case 11:case"end":return a.stop()}},a,r)}))()}}})()},function(e,t,r){var n=r(5),a=r(37),o=r(25),i=r(38),u=r(9),c=r(16),s=r(27),l=r(26),f=Array.prototype.concat;function d(){var e=f.apply([],arguments).filter(c);return 0===e.length?void 0:e}function p(e){if(!u(e))return e;var t=e.methods,r=e.properties,n=e.props,a=e.initializers,o=e.init,c=e.composers,f=e.deepProperties,p=e.deepProps,h=e.propertyDescriptors,v=e.staticProperties,m=e.statics,g=e.staticDeepProperties,b=e.deepStatics,y=e.configuration,w=e.conf,x=e.deepConfiguration,k=e.deepConf,_=u(n)||u(r)?l({},n,r):void 0,O=u(p)?s({},p):void 0;O=u(f)?s(O,f):O;var R=u(m)||u(v)?l({},m,v):void 0,S=u(b)?s({},b):void 0;S=u(g)?s(S,g):S;var A=e.staticPropertyDescriptors;i(e.name)&&(A=l({},A||{},{name:{value:e.name}}));var P=u(w)||u(y)?l({},w,y):void 0,E=u(k)?s({},k):void 0;E=u(x)?s(E,x):E;var C=d(o,a),j=d(c),T={};return t&&(T.methods=t),_&&(T.properties=_),C&&(T.initializers=C),j&&(T.composers=j),O&&(T.deepProperties=O),R&&(T.staticProperties=R),S&&(T.staticDeepProperties=S),h&&(T.propertyDescriptors=h),A&&(T.staticPropertyDescriptors=A),P&&(T.configuration=P),E&&(T.deepConfiguration=E),T}function h(){"use strict";for(var e=arguments.length,t=[],r=0;r<e;r+=1){var a=arguments[r];t.push(o(a)?a:p(a))}return n.apply(this||v,t)}var v=a.compose({staticProperties:{create:function(){return this.apply(this,arguments)},compose:h}}),m=a.compose.staticProperties;for(var g in m)h[g]=m[g].bind(v);h.compose=h.bind(),e.exports=h},function(e,t){e.exports=function(e){return"function"==typeof e}},function(e,t,r){"use strict";function n(e,t){return e.then(function(e){return[null,e]}).catch(function(e){return t&&Object.assign(e,t),[e,void 0]})}r.r(t),r.d(t,"to",function(){return n}),t.default=n},function(e,t){e.exports=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(a)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=f(r(4)),i=f(r(2)),u=f(r(0)),c=f(r(1)),s=f(r(17)),l=f(r(3));function f(e){return e&&e.__esModule?e:{default:e}}function d(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(a,o){try{var i=t[a](o),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}("next")})}}t.default=i.default.extend(o.default,{properties:{name:"Pages",remoteConnection:{baseUrl:"https://vnikkswzjatywzi.form.io/",path:"fast-app-pages",token:void 0}},methods:{set:function(e){var t=this;return d(regeneratorRuntime.mark(function r(){var n=e.appConf,a=e.forceOnline;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("true"!==String(n.offlineStart)||a){e.next=2;break}return e.abrupt("return",t.setOffline({appConf:n}));case 2:return e.abrupt("return",t.setOnline());case 3:case"end":return e.stop()}},r,t)}))()},setOffline:function(e){var t=this;return d(regeneratorRuntime.mark(function r(){var n,o,i,s,f=e.appConf;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.local().first();case 2:return n=e.sent,o=t.getLocalPagesDate(n),e.next=6,c.default.local().first();case 6:if(i=e.sent,s=u.default.get(function(){return f.offlineFiles.Pages[0].data}),!(i.fastUpdated<o)){e.next=10;break}return e.abrupt("return",u.default.get(function(){return n.data}));case 10:if(!n){e.next=13;break}return e.next=13,t.local().clear({sure:!0});case 13:return e.abrupt("return",t.local().insert(a({},s,{fastUpdated:(0,l.default)().unix()})));case 14:case"end":return e.stop()}},r,t)}))()},setOnline:function(){var e=this;return d(regeneratorRuntime.mark(function t(){var r,o,i,c,f;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.local().first();case 2:return r=t.sent,t.next=5,(0,s.default)(e.remote().first());case 5:if(o=t.sent,i=n(o,2),c=i[0],f=i[1],!c){t.next=12;break}throw console.log(c),new Error("Could not get remote Pages.");case 12:if(!(f=u.default.get(function(){return f.data}))||u.default.isEmpty(f)){t.next=18;break}if(!r){t.next=17;break}return t.next=17,e.local().clear({sure:!0});case 17:return t.abrupt("return",e.local().insert(a({},f,{fastUpdated:(0,l.default)().unix()})));case 18:return t.abrupt("return",r);case 19:case"end":return t.stop()}},t,e)}))()},getUpdatedDate:function(e){return u.default.get(function(){return e.fastUpdated},0)}}})()},function(e,t){e.exports=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(a)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=l(r(10)),o=l(r(31)),i=l(r(0)),u=l(r(17)),c=l(r(18)),s=l(r(3));function l(e){return e&&e.__esModule?e:{default:e}}function f(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(a,o){try{var i=t[a](o),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}("next")})}}var d=function(){var e=function(){var e=f(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.default.local().find();case 2:return t=e.sent,e.abrupt("return",i.default.get(function(){return t[0]}));case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t=function(){var e=f(regeneratorRuntime.mark(function e(t){var r,l,f,d,p,h,v=t.url;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=void 0,l=void 0,e.next=4,o.default.local().find();case 4:return f=e.sent,f=i.default.get(function(){return f[0]}),e.next=8,a.default.isOnline();case 8:if(!e.sent){e.next=18;break}return e.next=12,(0,u.default)(c.default.get(v+"/access"));case 12:if(d=e.sent,p=n(d,2),r=p[0],l=p[1],!r){e.next=18;break}throw new Error(r);case 18:if(!(l=i.default.get(function(){return l.data.roles}))){e.next=28;break}if(!f){e.next=23;break}return e.next=23,o.default.local().clear();case 23:return l.fastUpdated=(0,s.default)().unix(),e.next=26,o.default.local().insert(l);case 26:return h=e.sent,e.abrupt("return",h);case 28:return e.abrupt("return",f);case 29:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),r=function(){var t=f(regeneratorRuntime.mark(function t(r){var n,a,i,u=r.appConf;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:if(n=t.sent,a=d(n),!(u.offlineFiles.lastUpdated.date>a)&&n){t.next=13;break}if(!n){t.next=9;break}return t.next=9,o.default.local().clear();case 9:return t.next=11,o.default.local().insert(u.offlineFiles.Roles);case 11:return i=t.sent,t.abrupt("return",i);case 13:return t.abrupt("return",n);case 14:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),l=function(){var e=f(regeneratorRuntime.mark(function e(n){var a=n.url,o=n.appConf,i=n.forceOnline;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("true"!==o.offlineStart||i){e.next=2;break}return e.abrupt("return",r({appConf:o}));case 2:return e.abrupt("return",t({url:a}));case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();function d(e){return i.default.get(function(){return e.fastUpdated},0)}return Object.freeze({set:l,getLocal:e})}();t.default=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=c(r(3)),o=c(r(13)),i=c(r(0)),u=c(r(14));function c(e){return e&&e.__esModule?e:{default:e}}function s(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(a,o){try{var i=t[a](o),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}("next")})}}var l=function(){var e=function(){var e=s(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.created=(0,a.default)().unix(),e.next=3,u.default.local().insert({data:t});case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t=function(){var e=s(regeneratorRuntime.mark(function e(t){var r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n({},t,{type:"update",updated:(0,a.default)().unix()}),e.next=3,u.default.local().get(t._lid||t._id);case 3:if(!f(r=e.sent,t)){e.next=11;break}return r.data=t,r.isSubmit=!t._lid&&r.isSubmit,e.next=9,u.default.local().update(r);case 9:return o=e.sent,e.abrupt("return",o);case 11:return e.abrupt("return",r);case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),r=function(){var r=s(regeneratorRuntime.mark(function r(a){var o,i=a.submission,s=a.formio;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!l(i=c(i,s))){r.next=3;break}return r.abrupt("return",t(i));case 3:return r.next=5,e(i);case 5:o=r.sent,r.t0=i.trigger,r.next="importSubmission"===r.t0?9:"createLocalDraft"===r.t0?9:"resourceCreation"===r.t0?9:"createParalelSurvey"===r.t0?11:17;break;case 9:return r.abrupt("return",o);case 11:return o.trigger="createParalelSurvey",o.data.data.parallelSurvey=u.default.local().setParallelSurvey(n({},u.default.local().getParallelSurvey(o),{submissionId:o._id})),r.next=15,u.default.local().update(o);case 15:return r.abrupt("return",o);case 17:case"end":return r.stop()}},r,this)}));return function(e){return r.apply(this,arguments)}}();function c(e,t){return e=i.default.deleteNulls(e),e=n({},e,{sync:!1,user_email:o.default.email(),formio:t})}function l(e){return e._lid||e._id}function f(e,t){var r=!1===t.draft,n=!1===e.data.draft&&!1===t.draft,a="autoSaveAsDraft"===t.trigger||"saveAsLocalDraft"===t.trigger,o=!(!e.data.access||!Array.isArray(e.data.access)),i=!1!==e.data.syncError&&void 0!==e.data.syncError;return(r||n)&&!a||!o&&a&&!i}return Object.freeze({add:r})}();t.default=l},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t){e.exports=Array.isArray},function(e,t,r){var n=r(16);e.exports=function(e){return n(e)&&n(e.compose)}},function(e,t){e.exports=Object.assign},function(e,t,r){var n=r(36),a=r(9),o=r(24);function i(e,t){if(void 0===t)return e;if(o(t))return(o(e)?e:[]).concat(t);if(!n(t))return t;for(var r=a(e)?e:{},u=Object.keys(t),c=0;c<u.length;c+=1){var s=u[c],l=t[s];if(void 0!==l){var f=r[s],d=n(f)||o(l)?f:{};r[s]=i(d,l)}}return r}e.exports=function(e){for(var t=1;t<arguments.length;t++)e=i(e,arguments[t]);return e}},function(e,t,r){var n=r(44),a=r(45);e.exports=function(e,t,r){var o=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var i=(e=e||{}).random||(e.rng||n)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var u=0;u<16;++u)t[o+u]=i[u];return t||a(i)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(15)),a=i(r(0)),o=i(r(46));function i(e){return e&&e.__esModule?e:{default:e}}function u(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function c(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(a,o){try{var i=t[a](o),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}("next")})}}t.default=(0,n.default)({init:function(e){var t=e.name,r=e.remoteConnection;if(!t&&!r)throw new Error("Model must have a name or path");this.name=t||this.name,this.remoteConnection=r||this.remoteConnection},properties:{whereArray:[],orWhereArray:[],selectArray:[],orderByArray:[],limitNumber:void 0,offsetNumber:void 0,populate:[],chunk:null,pullSize:null,operators:["=","<",">","<=",">=","<>","!=","like","regexp","startsWith","endsWith","contains"]},methods:{get:function(){throw new Error("get() method not implemented")},all:function(){throw new Error("all() method not implemented")},find:function(e){throw new Error("find() method not implemented")},findOne:function(){throw new Error("findOne() method not implemented")},remove:function(){throw new Error("remove() method not implemented")},softDelete:function(){throw new Error("softDelete() method not implemented")},insert:function(){throw new Error("insert() method not implemented")},update:function(){throw new Error("update() method not implemented")},clear:function(){throw new Error("clear() method not implemented")},updateOrCreate:function(){throw new Error("updateOrCreate() method not implemented")},findAndRemove:function(){throw new Error("findAndRemove() method not implemented")},first:function(){var e=this;return c(regeneratorRuntime.mark(function t(){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.get();case 2:return r=t.sent,t.abrupt("return",a.default.get(function(){return r[0]},[]));case 4:case"end":return t.stop()}},t,e)}))()},collect:function(){var e=this;return c(regeneratorRuntime.mark(function t(){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.get();case 2:if(r=t.sent,Array.isArray(r)){t.next=5;break}throw new Error("Collect method only accepts arrays of data");case 5:return t.abrupt("return",(0,o.default)(r));case 6:case"end":return t.stop()}},t,e)}))()},select:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t=this.prepareInput(t),this.selectArray=this.selectArray.concat(t).filter(function(e,t,r){return r.indexOf(e)===t}),this},jsApplySelect:function(e){var t=this,r=Array.isArray(e)?[].concat(u(e)):[e];return this.selectArray.length>0&&(r=r.map(function(e){var r={};return t.selectArray.forEach(function(t){var n=a.default.getFromPath(e,t,void 0);void 0!==a.default.get(function(){return n.value},void 0)&&(r[n.label]=n.value)}),r})),r},offset:function(e){return this.offsetNumber=e,this},skip:function(e){return this.offset(e)},where:function(){for(var e=this,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return this.whereArray=[],(r=Array.isArray(r[0])?r:[r]).forEach(function(t){if(3!==t.length)throw new Error('There where clouse is not properly formatted, expecting: ["attribute", "operator","value"] but got "'+JSON.stringify(t)+'" ');e.whereArray.push(t)}),this},andWhere:function(){for(var e=this,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return(r=Array.isArray(r[0])?r:[r]).forEach(function(t){if(3!==t.length)throw new Error('There where clouse is not properly formatted, expecting: ["attribute", "operator","value"] but got "'+JSON.stringify(t)+'" ');e.whereArray.push(t)}),this},orWhere:function(){for(var e=this,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return(r=Array.isArray(r[0])?r:[r]).forEach(function(t){if(3!==t.length)throw new Error('There orWhere clouse is not properly formatted, expecting: ["attribute", "operator","value"] but got "'+JSON.stringify(t)+'" ');e.orWhereArray.push(t)}),this},limit:function(e){return this.limitNumber=e,this},take:function(e){return this.limit(e)},pluck:function(e){var t=this;return c(regeneratorRuntime.mark(function r(){var n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.get();case 2:return n=(n=r.sent).map(function(t){var r=a.default.getFromPath(t,e,void 0);if(void 0!==r.value)return r.value}),r.abrupt("return",n);case 5:case"end":return r.stop()}},r,t)}))()},orderBy:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.orderByArray=t,this},jsApplyOrderBy:function(e){var t=[].concat(u(e));if(0===this.orderByArray.length)return t;var r=this.orderByArray[0];if(this.selectArray.length>0&&(r.includes(".")||r.includes("[")))throw new Error('Cannot orderBy nested attribute "'+r+'" when using Select. You must rename the attribute');var n=this.orderByArray[1],o=this.orderByArray[2];return o||(o="string"),t=t.sort(function(e,t){var i=a.default.getFromPath(e,r,void 0).value,u=a.default.getFromPath(t,r,void 0).value;if(void 0===i||void 0===u)throw new Error('Cannot order by property "'+r+'" not all values have this property');return o.includes("string")||o.includes("number")?"asc"===n?i>u?1:i<u?-1:0:i>u?-1:i<u?1:0:o.includes("date")?"asc"===n?new Date(i)-new Date(u):new Date(u)-new Date(i):void 0})},prepareInput:function(e){var t=[];return e.forEach(function(e){var r=Array.isArray(e)?e:e.split(",");r=r.map(function(e){return e.trim()}),t=t.concat(r)}),t.filter(function(e,t,r){return r.indexOf(e)===t}),t}}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=l(r(8)),o=l(r(13)),i=l(r(14)),u=l(r(51)),c=l(r(52)),s=l(r(7));function l(e){return e&&e.__esModule?e:{default:e}}function f(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(a,o){try{var i=t[a](o),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}("next")})}}var d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,null,[{key:"now",value:function(){var t=f(regeneratorRuntime.mark(function t(r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.syncUsers();case 2:if(!o.default.check()){t.next=5;break}return t.next=5,e.syncSubmission(r);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"check",value:function(){var e=f(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.default.local().getUnsync();case 2:e.sent.length>0?s.default.emit({name:"FAST:SUBMISSION:UNSYNCED",data:!0,text:"There are unsynced Submissions"}):s.default.emit({name:"FAST:SUBMISSION:UNSYNCED",data:!1,text:"There are no unsynced Submissions"});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"syncSubmission",value:function(){var t=f(regeneratorRuntime.mark(function t(){var r,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.areUsersSynced();case 2:if(t.sent){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,i.default.local().getUnsync();case 7:return r=t.sent,t.next=10,c.default.isSyncing();case 10:n=t.sent,r.length>0&&!n&&u.default.send(r);case 12:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"getUsersToSync",value:function(){var e=f(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.default.local().find({"data.sync":!1});case 2:return t=e.sent,e.abrupt("return",t.filter(function(e){return!1===e.data.sync}));case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"areUsersSynced",value:function(){var t=f(regeneratorRuntime.mark(function t(){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getUsersToSync();case 2:return r=t.sent,t.abrupt("return",!!r&&Array.isArray(r)&&0===r.length);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"syncUsers",value:function(){var t=f(regeneratorRuntime.mark(function t(){var r,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getUsersToSync();case 2:return r=(r=t.sent).filter(function(e){return!1===e.data.sync&&!e.data.queuedForSync&&!e.data.syncError}),t.next=6,c.default.isSyncing();case 6:n=t.sent,Array.isArray(r)&&r.length>0&&!n&&u.default.send(r);case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}]),e}();t.default=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(r(4)),a=o(r(2));function o(e){return e&&e.__esModule?e:{default:e}}t.default=a.default.extend(n.default,{properties:{name:"Role",remoteConnection:{baseUrl:"https://vnikkswzjatywzi.form.io/",path:"access",token:void 0}}})()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sync=t.Hash=t.Role=t.OfflinePlugin=t.User=t.Import=t.Translation=t.Configuration=t.ParallelSurvey=t.SubmissionRepo=t.Submission=t.Pages=t.Form=t.Auth=t.Connection=t.FAST=t.Event=t.Moment=void 0;var n=x(r(33)),a=x(r(13)),o=x(r(10)),i=x(r(7)),u=x(r(53)),c=x(r(11)),s=x(r(19)),l=x(r(14)),f=x(r(22)),d=x(r(54)),p=x(r(1)),h=x(r(12)),v=x(r(55)),m=x(r(8)),g=x(r(56)),b=x(r(21)),y=x(r(60)),w=x(r(30));function x(e){return e&&e.__esModule?e:{default:e}}t.Moment=u.default,t.Event=i.default,t.FAST=n.default,t.Connection=o.default,t.Auth=a.default,t.Form=c.default,t.Pages=s.default,t.Submission=l.default,t.SubmissionRepo=f.default,t.ParallelSurvey=d.default,t.Configuration=p.default,t.Translation=h.default,t.Import=v.default,t.User=m.default,t.OfflinePlugin=g.default,t.Role=b.default,t.Hash=y.default,t.Sync=w.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(1)),a=s(r(11)),o=s(r(12)),i=s(r(19)),u=s(r(50)),c=s(r(21));function s(e){return e&&e.__esModule?e:{default:e}}function l(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(a,o){try{var i=t[a](o),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}("next")})}}var f=function(){var e=function(){var e=l(regeneratorRuntime.mark(function e(t){var r,s,l=t.appConf,f=t.forceOnline;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return void 0,void 0,f||u.default.set(3e3),e.next=4,n.default.set({appConf:l,forceOnline:f});case 4:return r=e.sent,e.next=7,c.default.set({url:r.APP_URL,appConf:l,forceOnline:f});case 7:return e.next=9,i.default.set({appConf:l,forceOnline:f});case 9:return e.next=11,a.default.set({appConf:l,forceOnline:f});case 11:return e.next=13,o.default.set({appConf:l,forceOnline:f});case 13:return s=e.sent,e.abrupt("return",{config:r,translations:s,defaultLanguage:localStorage.getItem("defaultLenguage")||"en"});case 15:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t=function(){var t=l(regeneratorRuntime.mark(function t(r){var n=r.appConf;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e({appConf:n,forceOnline:!0}));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}();return Object.freeze({start:e,sync:t})}();t.default=f},function(e,t){var r,n,a=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function u(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(e){r=o}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(e){n=i}}();var c,s=[],l=!1,f=-1;function d(){l&&c&&(l=!1,c.length?s=c.concat(s):f=-1,s.length&&p())}function p(){if(!l){var e=u(d);l=!0;for(var t=s.length;t;){for(c=s,s=[];++f<t;)c&&c[f].run();f=-1,t=s.length}c=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function v(){}a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];s.push(new h(e,t)),1!==s.length||l||u(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=v,a.addListener=v,a.once=v,a.off=v,a.removeListener=v,a.removeAllListeners=v,a.emit=v,a.prependListener=v,a.prependOnceListener=v,a.listeners=function(e){return[]},a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(e,t,r){e.exports=r(9)},function(e,t){e.exports=function(e){return Boolean(e)&&"object"==typeof e&&Object.getPrototypeOf(e)===Object.prototype}},function(e,t,r){var n=r(5);function a(e){return function(t){"use strict";var r={};return r[e]=t,this&&this.compose?this.compose(r):n(r)}}var o=a("properties"),i=a("staticProperties"),u=a("configuration"),c=a("deepProperties"),s=a("staticDeepProperties"),l=a("deepConfiguration"),f=a("initializers");e.exports=n({staticProperties:{methods:a("methods"),props:o,properties:o,statics:i,staticProperties:i,conf:u,configuration:u,deepProps:c,deepProperties:c,deepStatics:s,staticDeepProperties:s,deepConf:l,deepConfiguration:l,init:f,initializers:f,composers:a("composers"),propertyDescriptors:a("propertyDescriptors"),staticPropertyDescriptors:a("staticPropertyDescriptors")}})},function(e,t){e.exports=function(e){return"string"==typeof e}},function(e,t,r){var n=r(5),a=new WeakMap,o=function(e,t){function r(){"use strict";var t=a.get(this);return e.apply(t,arguments)}return Object.defineProperty(r,"name",{value:t,configurable:!0}),r};function i(e,t){var r=t.stamp.compose,n=r.deepConfiguration.Privatize.methods,i={};a.set(i,this);var u=r.methods;if(!u)return i;for(var c=Object.keys(u),s=0;s<c.length;s++){var l=c[s];n.indexOf(l)<0&&(i[l]=o(u[l],l))}if("undefined"!=typeof Symbol){var f=Symbol.for("stamp");u[f]&&(i[f]=t.stamp)}return i}var u=n({initializers:[i],deepConfiguration:{Privatize:{methods:[]}},staticProperties:{privatizeMethods:function(){"use strict";for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];"string"==typeof r&&r.length>0&&e.push(r)}return(this&&this.compose?this:u).compose({deepConfiguration:{Privatize:{methods:e}}})}},composers:[function(e){var t=e.stamp.compose.initializers;t.splice(t.indexOf(i),1),t.push(i)}]});e.exports=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=c(r(41)),a=c(r(0)),o=c(r(28)),i=c(r(29)),u=c(r(5));function c(e){return e&&e.__esModule?e:{default:e}}function s(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(a,o){try{var i=t[a](o),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}("next")})}}t.default=(0,u.default)(i.default,{methods:{get:function(){var e=this;return s(regeneratorRuntime.mark(function t(){var r,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.prepareFilter(),t.next=3,e.getModel();case 3:return t.t0=r,t.t1=e.offsetNumber,t.t2=e.limitNumber,t.next=8,t.sent.chain().find(t.t0).offset(t.t1).limit(t.t2).data();case 8:return n=t.sent,n=e.jsApplySelect(n),n=e.jsApplyOrderBy(n),t.abrupt("return",n);case 12:case"end":return t.stop()}},t,e)}))()},prepareFilter:function(){var e=this,t={$and:[]},r={$or:[]},n={};return this.whereArray.length>0&&(this.whereArray.forEach(function(r){var n={};if(r[0].includes("["))throw new Error('Error in: "'+r[0]+'" "Where" close does not work with Array elements');n[r[0]]={};var a=e.getLokiOperator(r[1]);n[r[0]][a]=r[2],a.includes("$regex|")&&(delete n[r[0]][a],n[r[0]].$regex=a.replace("$regex|","").replace("{{$var}}",r[2])),t.$and.push(n)}),n=t),this.orWhereArray.length>0&&(this.orWhereArray.forEach(function(t){var n={};n[t[0]]={};var a=e.getLokiOperator(t[1]);n[t[0]][a]=t[2],a.includes("$regex|")&&(delete n[t[0]][a],n[t[0]].$regex=a.replace("$regex|","").replace("{{$var}}",t[2])),r.$or.push(n)}),n={$or:[t,r]}),n},getLokiOperator:function(e){if(!this.operators.includes(e))throw new Error('The "'+e+'" operator is not supported');var t={"=":"$eq","<":"$lt",">":"$gt","<=":"$lte",">=":"$gte","<>":"$ne","!=":"$ne",like:"$aeq",regexp:"$regex",startsWith:"$regex|^{{$var}}",endsWith:"$regex|{{$var}}$",contains:"$regex|{{$var}}"},r=a.default.get(function(){return t[e]},void 0);if(!r)throw new Error('The operator "'+e+'" is not supported in Loki ');return r},getModel:function(){var e=this;return s(regeneratorRuntime.mark(function t(){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.default.get();case 2:return r=t.sent,t.abrupt("return",r.getCollection(e.name));case 4:case"end":return t.stop()}},t,e)}))()},all:function(){var e=this;return s(regeneratorRuntime.mark(function t(){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getModel();case 2:return r=t.sent,t.abrupt("return",r.find());case 4:case"end":return t.stop()}},t,e)}))()},remove:function(e){var t=this;return s(regeneratorRuntime.mark(function r(){var n,a=e.document;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getModel();case 2:return n=e.sent,e.abrupt("return",n.remove(a));case 4:case"end":return e.stop()}},r,t)}))()},insert:function(e){var t=this;return s(regeneratorRuntime.mark(function r(){var n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return e=a.default.cloneDeep(e),r.next=3,t.getModel();case 3:return n=r.sent,e._id=(0,o.default)()+"_local",r.abrupt("return",n.insert(e));case 6:case"end":return r.stop()}},r,t)}))()},update:function(e){var t=this;return s(regeneratorRuntime.mark(function r(){var n,a=e.document;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getModel();case 2:return n=e.sent,e.abrupt("return",n.update(a));case 4:case"end":return e.stop()}},r,t)}))()},updateOrCreate:function(e){var t=this;return s(regeneratorRuntime.mark(function r(){var n,a=e.document;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getModel();case 2:return n=e.sent,e.next=5,n.findOne(a);case 5:e.sent||n.insert(a);case 7:case"end":return e.stop()}},r,t)}))()},findAndRemove:function(e){var t=this;return s(regeneratorRuntime.mark(function r(){var n,a=e.filter;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getModel();case 2:return n=e.sent,e.abrupt("return",n.findAndRemove(a));case 4:case"end":return e.stop()}},r,t)}))()},clear:function(){var e=this;return s(regeneratorRuntime.mark(function t(){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getModel();case 2:return r=t.sent,t.abrupt("return",r.clear({removeIndices:!0}));case 4:case"end":return t.stop()}},t,e)}))()}}})},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=u(r(6)),o=u(r(42)),i=u(r(43));function u(e){return e&&e.__esModule?e:{default:e}}var c=null,s=function(){var t=function(t){t.env;return new a.default(function(t){var r=void 0,a=void 0,u=void 0,c={autosave:!0,autosaveInterval:1e3,autoload:!0,autoloadCallback:function(){var r=window&&window._FLUENT_&&window._FLUENT_.models?window._FLUENT_.models:e&&e._FLUENT_&&e._FLUENT_.models?e._FLUENT_.models:void 0;if(!r)throw new Error('Cannot Start FLUENT, no models registered or you dont have access to the "window" or "global" variable');Object.keys(r).forEach(function(e){var t=u.getCollection(e);t||u.addCollection(e)}),t(u)}};try{r=new i.default("FAST"),a=new o.default.LokiPartitioningAdapter(r,{paging:!0}),u=new o.default("FAST",n({},c,{adapter:a}))}catch(e){u=new o.default("FAST",c)}})},r=function(){var e=function(e){return function(){var t=e.apply(this,arguments);return new a.default(function(e,r){return function n(o,i){try{var u=t[o](i),c=u.value}catch(e){return void r(e)}if(!u.done)return a.default.resolve(c).then(function(e){n("next",e)},function(e){n("throw",e)});e(c)}("next")})}}(regeneratorRuntime.mark(function e(){var r=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).env,n=void 0===r?"prod":r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c){e.next=4;break}return e.next=3,t({env:n});case 3:c=e.sent;case 4:return e.abrupt("return",c);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}();return Object.freeze({get:r})}();t.default=s}).call(this,r(23))},function(e,t){e.exports=a},function(e,t,r){var n,a,o;a=[],void 0===(o="function"==typeof(n=function(){return function(){function e(e){if(this.app="loki",void 0!==e&&(this.app=e),this.catalog=null,!this.checkAvailability())throw new Error("indexedDB does not seem to be supported for your environment")}function t(e){this.db=null,this.initializeLokiCatalog(e)}return e.prototype.checkAvailability=function(){return!("undefined"==typeof indexedDB||!indexedDB)},e.prototype.loadDatabase=function(e,r){var n=this.app,a=this;null!==this.catalog&&null!==this.catalog.db?this.catalog.getAppKey(n,e,function(e){if("function"==typeof r){if(0===e.id)return void r(null);r(e.val)}else console.log(e.val)}):this.catalog=new t(function(t){a.catalog=t,a.loadDatabase(e,r)})},e.prototype.loadKey=e.prototype.loadDatabase,e.prototype.saveDatabase=function(e,r,n){var a=this.app,o=this;function i(e){e&&!0===e.success?n(null):n(new Error("Error saving database"))}null!==this.catalog&&null!==this.catalog.db?this.catalog.setAppKey(a,e,r,i):this.catalog=new t(function(t){o.catalog=t,t.setAppKey(a,e,r,i)})},e.prototype.saveKey=e.prototype.saveDatabase,e.prototype.deleteDatabase=function(e,r){var n=this.app,a=this;null!==this.catalog&&null!==this.catalog.db?this.catalog.getAppKey(n,e,function(e){var t=e.id;0!==t?a.catalog.deleteAppKey(t,r):"function"==typeof r&&r({success:!0})}):this.catalog=new t(function(t){a.catalog=t,a.deleteDatabase(e,r)})},e.prototype.deleteKey=e.prototype.deleteDatabase,e.prototype.deleteDatabasePartitions=function(e){var t=this;this.getDatabaseList(function(r){r.forEach(function(r){r.startsWith(e)&&t.deleteDatabase(r)})})},e.prototype.getDatabaseList=function(e){var r=this.app,n=this;null!==this.catalog&&null!==this.catalog.db?this.catalog.getAppKeys(r,function(t){for(var r=[],n=0;n<t.length;n++)r.push(t[n].key);"function"==typeof e?e(r):r.forEach(function(e){console.log(e)})}):this.catalog=new t(function(t){n.catalog=t,n.getDatabaseList(e)})},e.prototype.getKeyList=e.prototype.getDatabaseList,e.prototype.getCatalogSummary=function(e){this.app;var r=this;null!==this.catalog&&null!==this.catalog.db?this.catalog.getAllKeys(function(t){for(var r,n,a,o,i,u=[],c=0;c<t.length;c++)r=t[c],a=r.app||"",o=r.key||"",i=r.val||"",n=2*a.length+2*o.length+i.length+1,u.push({app:r.app,key:r.key,size:n});"function"==typeof e?e(u):u.forEach(function(e){console.log(e)})}):this.catalog=new t(function(t){r.catalog=t,r.getCatalogSummary(e)})},t.prototype.initializeLokiCatalog=function(e){var t=indexedDB.open("LokiCatalog",1),r=this;t.onupgradeneeded=function(e){var t=e.target.result;if(t.objectStoreNames.contains("LokiAKV")&&t.deleteObjectStore("LokiAKV"),!t.objectStoreNames.contains("LokiAKV")){var r=t.createObjectStore("LokiAKV",{keyPath:"id",autoIncrement:!0});r.createIndex("app","app",{unique:!1}),r.createIndex("key","key",{unique:!1}),r.createIndex("appkey","appkey",{unique:!0})}},t.onsuccess=function(t){r.db=t.target.result,"function"==typeof e&&e(r)},t.onerror=function(e){throw e}},t.prototype.getAppKey=function(e,t,r){var n=this.db.transaction(["LokiAKV"],"readonly"),a=n.objectStore("LokiAKV"),o=a.index("appkey"),i=e+","+t,u=o.get(i);u.onsuccess=function(e){return function(t){var r=t.target.result;null!==r&&void 0!==r||(r={id:0,success:!1}),"function"==typeof e?e(r):console.log(r)}}(r),u.onerror=function(e){return function(t){if("function"!=typeof e)throw t;e({id:0,success:!1})}}(r)},t.prototype.getAppKeyById=function(e,t,r){var n=this.db.transaction(["LokiAKV"],"readonly"),a=n.objectStore("LokiAKV"),o=a.get(e);o.onsuccess=function(e,t){return function(r){"function"==typeof t?t(r.target.result,e):console.log(r.target.result)}}(r,t)},t.prototype.setAppKey=function(e,t,r,n){var a=this.db.transaction(["LokiAKV"],"readwrite"),o=a.objectStore("LokiAKV"),i=o.index("appkey"),u=e+","+t,c=i.get(u);c.onsuccess=function(a){var i=a.target.result;null===i||void 0===i?i={app:e,key:t,appkey:e+","+t,val:r}:i.val=r;var u=o.put(i);u.onerror=function(e){return function(t){"function"==typeof e?e({success:!1}):(console.error("LokiCatalog.setAppKey (set) onerror"),console.error(c.error))}}(n),u.onsuccess=function(e){return function(t){"function"==typeof e&&e({success:!0})}}(n)},c.onerror=function(e){return function(t){"function"==typeof e?e({success:!1}):(console.error("LokiCatalog.setAppKey (get) onerror"),console.error(c.error))}}(n)},t.prototype.deleteAppKey=function(e,t){var r=this.db.transaction(["LokiAKV"],"readwrite"),n=r.objectStore("LokiAKV"),a=n.delete(e);a.onsuccess=function(e){return function(t){"function"==typeof e&&e({success:!0})}}(t),a.onerror=function(e){return function(t){"function"==typeof e?e({success:!1}):(console.error("LokiCatalog.deleteAppKey raised onerror"),console.error(a.error))}}(t)},t.prototype.getAppKeys=function(e,t){var r=this.db.transaction(["LokiAKV"],"readonly"),n=r.objectStore("LokiAKV"),a=n.index("app"),o=IDBKeyRange.only(e),i=a.openCursor(o);i.onsuccess=function(e,t){return function(r){var n=r.target.result;if(n){var a=n.value;e.push(a),n.continue()}else"function"==typeof t?t(e):console.log(e)}}([],t),i.onerror=function(e){return function(t){"function"==typeof e?e(null):(console.error("LokiCatalog.getAppKeys raised onerror"),console.error(t))}}(t)},t.prototype.getAllKeys=function(e){var t=this.db.transaction(["LokiAKV"],"readonly"),r=t.objectStore("LokiAKV"),n=r.openCursor();n.onsuccess=function(e,t){return function(r){var n=r.target.result;if(n){var a=n.value;e.push(a),n.continue()}else"function"==typeof t?t(e):console.log(e)}}([],e),n.onerror=function(e){return function(t){"function"==typeof e&&e(null)}}(e)},e}()})?n.apply(t,a):n)||(e.exports=o)},function(e,t){var r="undefined"!=typeof crypto&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&msCrypto.getRandomValues.bind(msCrypto);if(r){var n=new Uint8Array(16);e.exports=function(){return r(n),n}}else{var a=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),a[t]=e>>>((3&t)<<3)&255;return a}}},function(e,t){for(var r=[],n=0;n<256;++n)r[n]=(n+256).toString(16).substr(1);e.exports=function(e,t){var n=t||0,a=r;return a[e[n++]]+a[e[n++]]+a[e[n++]]+a[e[n++]]+"-"+a[e[n++]]+a[e[n++]]+"-"+a[e[n++]]+a[e[n++]]+"-"+a[e[n++]]+a[e[n++]]+"-"+a[e[n++]]+a[e[n++]]+a[e[n++]]+a[e[n++]]+a[e[n++]]+a[e[n++]]}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(r(15)),a=o(r(0));function o(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}t.default=(0,n.default)({init:function(e){if(!Array.isArray(e))throw new Error("Collect method only accepts arrays of data");this.data=e},properties:{data:[]},methods:{get:function(){return this.data},avg:function(e){return this.average(e)},average:function(e){var t=[].concat(i(this.data)),r=t.reduce(function(t,r){var n=a.default.getFromPath(r,e,void 0);if(void 0!==n&&n.value)return t+n.value},0);try{return r/t.length}catch(e){throw new Error('Division between "'+r+'" and "'+t.length+'" is not valid.')}},chunks:function(e){for(var t=[].concat(i(this.data)),r=[];t.length;)r.push(t.splice(0,e));return this.data=r,this},collapse:function(){var e=[];return[].concat(i(this.data)).forEach(function(t){t.forEach(function(t){e.push(t)})}),this.data=e,this},unChunk:function(){return this.collapse()},concat:function(e){return this.data=[].concat(i(this.data),[e]),this}}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(a)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=l(r(17)),i=l(r(18)),u=l(r(29)),c=l(r(5)),s=l(r(10));function l(e){return e&&e.__esModule?e:{default:e}}function f(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(a,o){try{var i=t[a](o),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}("next")})}}t.default=(0,c.default)(u.default,{methods:{get:function(){var e=this;return f(regeneratorRuntime.mark(function t(){var r,n,i,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=void 0,n=void 0,t.next=4,(0,o.default)(e.httpGET());case 4:if(i=t.sent,u=a(i,2),r=u[0],n=u[1],!r){t.next=11;break}throw console.log(r),new Error("Error while getting submissions");case 11:return n=e.jsApplySelect(n.data),n=e.jsApplyOrderBy(n),t.abrupt("return",n);case 14:case"end":return t.stop()}},t,e)}))()},all:function(){var e=this;return f(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.get());case 1:case"end":return t.stop()}},t,e)}))()},insert:function(e){var t=this;return f(regeneratorRuntime.mark(function r(){var n,i,u,c;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return e={data:e},r.next=3,(0,o.default)(t.httpPOST(e));case 3:if(n=r.sent,i=a(n,2),u=i[0],c=i[1],!u){r.next=10;break}throw console.log(u),new Error("Cannot insert data");case 10:return r.abrupt("return",c.data);case 11:case"end":return r.stop()}},r,t)}))()},clear:function(){var e=this;return f(regeneratorRuntime.mark(function t(){var r,n,u,c,s,l,f,d=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).sure;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(d&&!0===d){t.next=2;break}throw new Error('Clear() method will delete everything!, you must set the "sure" parameter "clear({sure:true})" to continue');case 2:return r=[],n=e.getHeaders(),t.next=6,(0,o.default)(e.select("_id").pluck("_id"));case 6:if(u=t.sent,c=a(u,2),s=c[0],l=c[1],!s){t.next=13;break}throw console.log(s),new Error("Cannot get remote Model");case 13:return f=e.getUrl().slice(0,-1),l.forEach(function(e){var t=f+"/"+e;r.push(i.default.delete(t,{headers:n}))}),t.abrupt("return",i.default.all(r));case 16:case"end":return t.stop()}},t,e)}))()},find:function(e){var t=this;return f(regeneratorRuntime.mark(function r(){var i,u,c,s;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if("string"==typeof e){r.next=2;break}throw new Error('Formio connector find() method only accepts strings "'+(void 0===e?"undefined":n(e))+'" given "'+e+'"');case 2:return r.next=4,(0,o.default)(t.where("_id","=",e).first());case 4:if(i=r.sent,u=a(i,2),c=u[0],s=u[1],!c){r.next=11;break}throw console.log(c),new Error("Find() could not get remote data");case 11:return r.abrupt("return",s);case 12:case"end":return r.stop()}},r,t)}))()},getUrl:function(){var e=this.remoteConnection&&this.remoteConnection.baseUrl?this.remoteConnection.baseUrl:void 0,t=this.remoteConnection&&this.remoteConnection.path?this.remoteConnection.path:void 0;if(this.remoteConnection.pullForm||(t=this.remoteConnection.id?t+"/submission/"+this.remoteConnection.id:t+"/submission"),!e||!t)throw new Error("Cannot get remote model. BaseUrl or Path is not defined");return e+t},getHeaders:function(){var e={};this.remoteConnection.token&&(e[this.getTokenType(this.remoteConnection.token)]=this.remoteConnection.token);return e},getSpacer:function(e){return"&"===e.substr(e.length-1)?"":"&"},httpGET:function(){var e=this.getUrl(),t=this.getHeaders(),r=this.getFilters(),n=this.getLimit(),a=this.getSkip(),o=this.getSelect();if(e=e+""+n,e=r?e+this.getSpacer(e)+r:e,e=a?e+this.getSpacer(e)+a:e,e=o?e+this.getSpacer(e)+o:e,!s.default.isOnline())throw new Error("Cannot make get request to "+e+". You are not online");return i.default.get(e,{headers:t})},httpPOST:function(e){var t=this.getUrl(),r=this.getHeaders();if(!s.default.isOnline())throw new Error("Cannot make request post to "+t+". You are not online");return i.default.post(t,e,{headers:r})},getTokenType:function(e){return e.length>32?"x-jwt-token":"x-token"},getFilters:function(){var e=this.whereArray;if(e&&0!==e.length){var t="";return e.forEach(function(e){var r="",n=e[0],a=e[1],o=e[2];switch(a){case"=":t=t+n+"="+o+"&";break;case"!=":t=t+n+"__ne="+o+"&";break;case">":t=t+n+"__gt="+o+"&";break;case">=":t=t+n+"__gte="+o+"&";break;case"<":t=t+n+"__lt="+o+"&";break;case"<=":t=t+n+"__lte="+o+"&";break;case"in":r="",o.forEach(function(e,t,n){r=t===n.length-1?r+e:r+e+","}),t=t+n+"__in="+r+"&";break;case"nin":r="",o.forEach(function(e,t,n){r=t===n.length-1?r+e:r+e+","}),t=t+n+"__nin="+r+"&";break;case"exists":t=t+n+"__exists="+!0+"&";break;case"!exists":t=t+n+"__exists="+!1+"&";break;case"regex":t=t+n+"__regex="+o+"&"}}),t.substring(0,t.length-1)}},getLimit:function(){return this.limitNumber&&0!==this.limitNumber||(this.limitNumber=50),"?limit="+this.limitNumber},getSkip:function(){return this.offsetNumber||(this.offsetNumber=0),"skip="+this.offsetNumber},getSelect:function(){var e=this.selectArray;if(e=e.map(function(e){return e.split(" as ")[0]}))return"select="+e.join(",")}}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=c(r(0)),i=c(r(12)),u=c(r(19));function c(e){return e&&e.__esModule?e:{default:e}}function s(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(a,o){try{var i=t[a](o),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}("next")})}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,null,[{key:"get",value:function(){var e=s(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.handle(t));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handle",value:function(){var e=s(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchAllLabels(t);case 2:return r=e.sent,e.next=5,i.default.local().find();case 5:return n=e.sent[0].data,Object.keys(n).forEach(function(e){var t=n[e];Object.keys(t).forEach(function(n){r[n]&&t[n]&&""!==t[n]&&(r[n].translations[e]=t[n])})}),e.abrupt("return",r);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"fetchAllLabels",value:function(){var e=s(regeneratorRuntime.mark(function e(t){var r,n,a,o,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},t=t.map(function(e){return e.data}),n=this.getFormLabels(t),e.next=5,i.default.local().find();case 5:return a=e.sent[0].data,e.next=8,this.getAppLabels(a);case 8:return o=e.sent,r=this.mergeLabels(n,o),e.t0=this,e.next=13,u.default.getLocal();case 13:return e.t1=e.sent,e.next=16,e.t0.getPagesLabels.call(e.t0,e.t1);case 16:return c=e.sent,r=this.mergeLabels(r,c),e.abrupt("return",r);case 19:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"createOrAdd",value:function(e){var t=e.labels,r=e.label,a=n({},t);return a[r.text]?r.location&&Array.isArray(r.location)?r.location.forEach(function(e){a[r.text].location.push({text:r.text,template:r.template,type:e.type,picture:e.picture})}):a[r.text].location.push(r):r.location&&Array.isArray(r.location)?(a[r.text]={location:[],template:r.template,translations:{}},r.location.forEach(function(e){a[r.text].location.push({text:r.text,template:r.template,type:e.type,picture:e.picture})})):a[r.text]={location:[r],translations:{}},a}},{key:"mergeLabels",value:function(e,t){var r=this,a=n({},e);return Object.keys(t).forEach(function(e){a=r.createOrAdd({labels:a,label:n({},t[e],{text:e})})}),a}},{key:"getFormLabels",value:function(e){var t=this,r={},n=["suffix","prefix","addAnother","removeRow","saveRow","legend","title","label","placeholder","tooltip"];return e.forEach(function(e){r=t.createOrAdd({labels:r,label:{text:e.title,type:"formTitle",component:e.path,form:e.path,picture:null}}),o.default.eachComponent(e.components,function(a){n.forEach(function(n){a[n]&&""!==a[n]&&(r=t.createOrAdd({labels:r,label:{text:a[n],type:n,component:a.key,form:e.path,picture:null}}))}),a.values&&a.values.forEach(function(n){n.label&&""!==n.label&&(r=t.createOrAdd({labels:r,label:{text:n.label,type:"value",component:a.key,form:e.path,picture:null}}))}),"htmlelement"===a.type&&""!==a.content&&(r=t.createOrAdd({labels:r,label:{text:a.content,type:"htmlElement",component:a.key,form:e.path,picture:null}})),"select"===a.type&&a.data&&a.data.values&&a.data.values.forEach(function(n){n.label&&""!==n.label&&(r=t.createOrAdd({labels:r,label:{text:n.label,type:"selectValue",component:a.key,form:e.path,picture:null}}))}),a.type&&"survey"===a.type&&a.questions&&(a.questions.forEach(function(n){r=t.createOrAdd({labels:r,label:{text:n.label,type:"surveyLabel",component:a.key,form:e.path,picture:null}})}),a.values.forEach(function(n){r=t.createOrAdd({labels:r,label:{text:n.label,type:"surveyValues",component:a.key,form:e.path,picture:null}})}))},!0)}),r}},{key:"getAppLabels",value:function(){var e=s(regeneratorRuntime.mark(function e(t){var r,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},t.forEach(function(e){r=n.createOrAdd({labels:r,label:e})}),e.abrupt("return",r);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getPagesLabels",value:function(){var e=s(regeneratorRuntime.mark(function e(t){var r,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},t.pages.forEach(function(e){e.cards.forEach(function(t){t.title&&""!==t.title&&n.createOrAdd({labels:r,label:{text:t.title,type:"pageCardTitle",picture:null,card:t,page:e}}),t.subtitle&&""!==t.subtitle&&n.createOrAdd({labels:r,label:{text:t.subtitle,type:"pageCardSubtitle",picture:null,card:t,page:e}}),t.actions.forEach(function(a){a.text&&""!==a.text&&n.createOrAdd({labels:r,label:{text:a.text,type:"pageActionButtonText",picture:null,card:t,page:e}})})}),e.title&&""!==e.title&&n.createOrAdd({labels:r,label:{text:e.title,type:"pageTitle",picture:null,page:e}})}),e.abrupt("return",r);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}();t.default=l},function(e){e.exports=[{code:"ab",direction:"ltr",label:"Abkhazian"},{code:"aa",direction:"ltr",label:"Afar"},{code:"af",direction:"ltr",label:"Afrikaans"},{code:"ak",direction:"ltr",label:"Akan"},{code:"sq",direction:"ltr",label:"Albanian"},{code:"am",direction:"ltr",label:"Amharic"},{code:"ar",direction:"rtl",label:"Arabic"},{code:"an",direction:"ltr",label:"Aragonese"},{code:"hy",direction:"ltr",label:"Armenian"},{code:"as",direction:"ltr",label:"Assamese"},{code:"av",direction:"ltr",label:"Avaric"},{code:"ae",direction:"ltr",label:"Avestan"},{code:"ay",direction:"ltr",label:"Aymara"},{code:"az",direction:"ltr",label:"Azerbaijani"},{code:"bm",direction:"ltr",label:"Bambara"},{code:"ba",direction:"ltr",label:"Bashkir"},{code:"eu",direction:"ltr",label:"Basque"},{code:"be",direction:"ltr",label:"Belarusian"},{code:"bn",direction:"ltr",label:"Bengali"},{code:"bh",direction:"ltr",label:"Bihari languages"},{code:"bi",direction:"ltr",label:"Bislama"},{code:"bs",direction:"ltr",label:"Bosnian"},{code:"br",direction:"ltr",label:"Breton"},{code:"bg",direction:"ltr",label:"Bulgarian"},{code:"my",direction:"ltr",label:"Burmese"},{code:"ca",direction:"ltr",label:"Catalan, Valencian"},{code:"km",direction:"ltr",label:"Central Khmer"},{code:"ch",direction:"ltr",label:"Chamorro"},{code:"ce",direction:"ltr",label:"Chechen"},{code:"ny",direction:"ltr",label:"Chichewa"},{code:"zh",direction:"ltr",label:"Chinese"},{code:"cu",direction:"ltr",label:"Church Slavonic, Old Bulgarian, Old Church Slavonic"},{code:"cv",direction:"ltr",label:"Chuvash"},{code:"kw",direction:"ltr",label:"Cornish"},{code:"co",direction:"ltr",label:"Corsican"},{code:"cr",direction:"ltr",label:"Cree"},{code:"hr",direction:"ltr",label:"Croatian"},{code:"cs",direction:"ltr",label:"Czech"},{code:"da",direction:"ltr",label:"Danish"},{code:"dv",direction:"ltr",label:"Divehi, Dhivehi, Maldivian"},{code:"nl",direction:"ltr",label:"Dutch, Flemish"},{code:"dz",direction:"ltr",label:"Dzongkha"},{code:"en",direction:"ltr",label:"English"},{code:"eo",direction:"ltr",label:"Esperanto"},{code:"et",direction:"ltr",label:"Estonian"},{code:"ee",direction:"ltr",label:"Ewe"},{code:"fo",direction:"ltr",label:"Faroese"},{code:"fj",direction:"ltr",label:"Fijian"},{code:"fi",direction:"ltr",label:"Finnish"},{code:"fr",direction:"ltr",label:"French"},{code:"ff",direction:"ltr",label:"Fulah"},{code:"gd",direction:"ltr",label:"Gaelic, Scottish Gaelic"},{code:"gl",direction:"ltr",label:"Galician"},{code:"lg",direction:"ltr",label:"Ganda"},{code:"ka",direction:"ltr",label:"Georgian"},{code:"de",direction:"ltr",label:"German"},{code:"ki",direction:"ltr",label:"Gikuyu, Kikuyu"},{code:"el",direction:"ltr",label:"Greek (Modern)"},{code:"kl",direction:"ltr",label:"Greenlandic, Kalaallisut"},{code:"gn",direction:"ltr",label:"Guarani"},{code:"gu",direction:"ltr",label:"Gujarati"},{code:"ht",direction:"ltr",label:"Haitian, Haitian Creole"},{code:"ha",direction:"ltr",label:"Hausa"},{code:"he",direction:"ltr",label:"Hebrew"},{code:"hz",direction:"ltr",label:"Herero"},{code:"hi",direction:"ltr",label:"Hindi"},{code:"ho",direction:"ltr",label:"Hiri Motu"},{code:"hu",direction:"ltr",label:"Hungarian"},{code:"is",direction:"ltr",label:"Icelandic"},{code:"io",direction:"ltr",label:"Ido"},{code:"ig",direction:"ltr",label:"Igbo"},{code:"id",direction:"ltr",label:"Indonesian"},{code:"ia",direction:"ltr",label:"Interlingua (International Auxiliary Language Association)"},{code:"ie",direction:"ltr",label:"Interlingue"},{code:"iu",direction:"ltr",label:"Inuktitut"},{code:"ik",direction:"ltr",label:"Inupiaq"},{code:"ga",direction:"ltr",label:"Irish"},{code:"it",direction:"ltr",label:"Italian"},{code:"ja",direction:"ltr",label:"Japanese"},{code:"jv",direction:"ltr",label:"Javanese"},{code:"kn",direction:"ltr",label:"Kannada"},{code:"kr",direction:"ltr",label:"Kanuri"},{code:"ks",direction:"ltr",label:"Kashmiri"},{code:"kk",direction:"ltr",label:"Kazakh"},{code:"rw",direction:"ltr",label:"Kinyarwanda"},{code:"kv",direction:"ltr",label:"Komi"},{code:"kg",direction:"ltr",label:"Kongo"},{code:"ko",direction:"ltr",label:"Korean"},{code:"kj",direction:"ltr",label:"Kwanyama, Kuanyama"},{code:"ku",direction:"ltr",label:"Kurdish"},{code:"ky",direction:"ltr",label:"Kyrgyz"},{code:"lo",direction:"ltr",label:"Lao"},{code:"la",direction:"ltr",label:"Latin"},{code:"lv",direction:"ltr",label:"Latvian"},{code:"lb",direction:"ltr",label:"Letzeburgesch, Luxembourgish"},{code:"li",direction:"ltr",label:"Limburgish, Limburgan, Limburger"},{code:"ln",direction:"ltr",label:"Lingala"},{code:"lt",direction:"ltr",label:"Lithuanian"},{code:"lu",direction:"ltr",label:"Luba-Katanga"},{code:"mk",direction:"ltr",label:"Macedonian"},{code:"mg",direction:"ltr",label:"Malagasy"},{code:"ms",direction:"ltr",label:"Malay"},{code:"ml",direction:"ltr",label:"Malayalam"},{code:"mt",direction:"ltr",label:"Maltese"},{code:"gv",direction:"ltr",label:"Manx"},{code:"mi",direction:"ltr",label:"Maori"},{code:"mr",direction:"ltr",label:"Marathi"},{code:"mh",direction:"ltr",label:"Marshallese"},{code:"ro",direction:"ltr",label:"Moldovan, Moldavian, Romanian"},{code:"mn",direction:"ltr",label:"Mongolian"},{code:"na",direction:"ltr",label:"Nauru"},{code:"nv",direction:"ltr",label:"Navajo, Navaho"},{code:"nd",direction:"ltr",label:"Northern Ndebele"},{code:"ng",direction:"ltr",label:"Ndonga"},{code:"ne",direction:"ltr",label:"Nepali"},{code:"se",direction:"ltr",label:"Northern Sami"},{code:"no",direction:"ltr",label:"Norwegian"},{code:"nb",direction:"ltr",label:"Norwegian Bokmål"},{code:"nn",direction:"ltr",label:"Norwegian Nynorsk"},{code:"ii",direction:"ltr",label:"Nuosu, Sichuan Yi"},{code:"oc",direction:"ltr",label:"Occitan (post 1500)"},{code:"oj",direction:"ltr",label:"Ojibwa"},{code:"or",direction:"ltr",label:"Oriya"},{code:"om",direction:"ltr",label:"Oromo"},{code:"os",direction:"ltr",label:"Ossetian, Ossetic"},{code:"pi",direction:"ltr",label:"Pali"},{code:"pa",direction:"ltr",label:"Panjabi, Punjabi"},{code:"ps",direction:"ltr",label:"Pashto, Pushto"},{code:"fa",direction:"ltr",label:"Persian"},{code:"pl",direction:"ltr",label:"Polish"},{code:"pt",direction:"ltr",label:"Portuguese"},{code:"qu",direction:"ltr",label:"Quechua"},{code:"rm",direction:"ltr",label:"Romansh"},{code:"rn",direction:"ltr",label:"Rundi"},{code:"ru",direction:"ltr",label:"Russian"},{code:"sm",direction:"ltr",label:"Samoan"},{code:"sg",direction:"ltr",label:"Sango"},{code:"sa",direction:"ltr",label:"Sanskrit"},{code:"sc",direction:"ltr",label:"Sardinian"},{code:"sr",direction:"ltr",label:"Serbian"},{code:"sn",direction:"ltr",label:"Shona"},{code:"sd",direction:"ltr",label:"Sindhi"},{code:"si",direction:"ltr",label:"Sinhala, Sinhalese"},{code:"sk",direction:"ltr",label:"Slovak"},{code:"sl",direction:"ltr",label:"Slovenian"},{code:"so",direction:"ltr",label:"Somali"},{code:"st",direction:"ltr",label:"Sotho, Southern"},{code:"nr",direction:"ltr",label:"South Ndebele"},{code:"es",direction:"ltr",label:"Spanish"},{code:"su",direction:"ltr",label:"Sundanese"},{code:"sw",direction:"ltr",label:"Swahili"},{code:"ss",direction:"ltr",label:"Swati"},{code:"sv",direction:"ltr",label:"Swedish"},{code:"tl",direction:"ltr",label:"Tagalog"},{code:"ty",direction:"ltr",label:"Tahitian"},{code:"tg",direction:"ltr",label:"Tajik"},{code:"ta",direction:"ltr",label:"Tamil"},{code:"tt",direction:"ltr",label:"Tatar"},{code:"te",direction:"ltr",label:"Telugu"},{code:"th",direction:"ltr",label:"Thai"},{code:"bo",direction:"ltr",label:"Tibetan"},{code:"ti",direction:"ltr",label:"Tigrinya"},{code:"to",direction:"ltr",label:"Tonga (Tonga Islands)"},{code:"ts",direction:"ltr",label:"Tsonga"},{code:"tn",direction:"ltr",label:"Tswana"},{code:"tr",direction:"ltr",label:"Turkish"},{code:"tk",direction:"ltr",label:"Turkmen"},{code:"tw",direction:"ltr",label:"Twi"},{code:"ug",direction:"ltr",label:"Uighur, Uyghur"},{code:"uk",direction:"ltr",label:"Ukrainian"},{code:"umb",direction:"ltr",label:"Umbundu"},{code:"ur",direction:"ltr",label:"Urdu"},{code:"uz",direction:"ltr",label:"Uzbek"},{code:"ve",direction:"ltr",label:"Venda"},{code:"vi",direction:"ltr",label:"Vietnamese"},{code:"vo",direction:"ltr",label:"Volap_k"},{code:"wa",direction:"ltr",label:"Walloon"},{code:"cy",direction:"ltr",label:"Welsh"},{code:"fy",direction:"ltr",label:"Western Frisian"},{code:"wo",direction:"ltr",label:"Wolof"},{code:"xh",direction:"ltr",label:"Xhosa"},{code:"yi",direction:"ltr",label:"Yiddish"},{code:"yo",direction:"ltr",label:"Yoruba"},{code:"za",direction:"ltr",label:"Zhuang, Chuang"},{code:"zu",direction:"ltr",label:"Zulu"}]},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(r(30)),a=o(r(0));function o(e){return e&&e.__esModule?e:{default:e}}var i=function(){var e=function(){var e=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(a,o){try{var i=t[a](o),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}("next")})}}(regeneratorRuntime.mark(function e(t){var r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=function(e,t){var r=Date.now,n=window.requestAnimationFrame,a=r(),o=void 0;return n(function i(){r()-a<t||(a+=t,e()),o||n(i)}),{clear:function(){o=1}}},o=a.default.debounce(n.default.now,2e3),r(o,t);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();return Object.freeze({set:e})}();t.default=i},function(e,t,r){"use strict"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(a,o){try{var i=t[a](o),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}("next")})}}var o=!1,i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,null,[{key:"isSyncing",value:function(){var e=a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",o);case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"startSync",value:function(){var e=a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=!0,e.abrupt("return",this.isSyncing());case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"stopSync",value:function(){var e=a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=!1,e.abrupt("return",this.isSyncing());case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),e}();t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(e){return e&&e.__esModule?e:{default:e}}(r(3));var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,null,[{key:"setLocales",value:function(){a.default.locale(e.getLenguage())}},{key:"changeLanguage",value:function(e){a.default.locale(e)}},{key:"getLenguage",value:function(){return localStorage.getItem("defaultLenguage")?localStorage.getItem("defaultLenguage"):"en"}}]),e}();t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=c(r(28)),o=c(r(0)),i=c(r(14)),u=c(r(6));function c(e){return e&&e.__esModule?e:{default:e}}function s(e){return function(){var t=e.apply(this,arguments);return new u.default(function(e,r){return function n(a,o){try{var i=t[a](o),c=i.value}catch(e){return void r(e)}if(!i.done)return u.default.resolve(c).then(function(e){n("next",e)},function(e){n("throw",e)});e(c)}("next")})}}var l=function(){var e=function(){var e=s(regeneratorRuntime.mark(function e(t){var n,a=t.submission,o=t.vm;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!f(n=l(a))){e.next=3;break}return e.abrupt("return",Object.assign({},c(o),{groupId:n}));case 3:return e.abrupt("return",Object.assign({},r(o),{groupId:n}));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t=function(){var e=s(regeneratorRuntime.mark(function e(t){var r=t.submission,n=t.vm,a=t.info;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!f(l(r))){e.next=3;break}return e.abrupt("return",p({submission:r,vm:n,info:a}));case 3:return e.abrupt("return",d({submission:r,vm:n,info:a}));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();function r(e){return{progressSteps:["1","2","3"],steps:[{title:e.$t("Group Name"),text:e.$t("Give the group a name"),inputValidator:function(t){return new u.default(function(r,n){""!==t?r():n(new Error(e.$t("The group name is already taken")))})}},{title:e.$t("Current Participant Name"),text:e.$t("Give the current participant a name")},{title:e.$t("Next participant Name"),text:e.$t("Give the next participant a name")}]}}function c(e){return{progressSteps:["1"],steps:[{title:e.$t("Participant Name"),text:e.$t("Give the next participant a name")}]}}function l(e){return o.default.get(function(){return i.default.local().getParallelSurvey(e).groupId})}function f(e){return e}function d(e){var t=e.submission,r=e.vm,o=e.info,u=o[0],c=o[1],s=o[2],l={groupId:(0,a.default)(),groupName:u,participantName:c,submissionId:t._id};return r.currentSubmission.data.parallelSurvey=i.default.local().setParallelSurvey(l),{parallelSurvey:i.default.local().setParallelSurvey(n({},l,{participantName:s}))}}function p(e){var t=e.submission,r=(e.vm,e.info[0]),n=i.default.local().getParallelSurvey(t);return n.participantName=r,{parallelSurvey:i.default.local().setParallelSurvey(n)}}return Object.freeze({createWizard:e,createNewSurvey:t})}();t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=u(r(22)),o=u(r(7)),i=u(r(6));function u(e){return e&&e.__esModule?e:{default:e}}function c(e){return function(){var t=e.apply(this,arguments);return new i.default(function(e,r){return function n(a,o){try{var u=t[a](o),c=u.value}catch(e){return void r(e)}if(!u.done)return i.default.resolve(c).then(function(e){n("next",e)},function(e){n("throw",e)});e(c)}("next")})}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,null,[{key:"fromJsonFile",value:function(t,r){var n=new FileReader;n.onload=function(t){var n=void 0;try{n=JSON.parse(t.target.result)}catch(e){throw new Error("The Json file could not be parsed")}e.parseJson(n,r)},n.readAsText(t)}},{key:"parseJson",value:function(){var t=c(regeneratorRuntime.mark(function t(r,n){var a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=e.getFormIOInstance(n),i.default.each(r,function(){var t=c(regeneratorRuntime.mark(function t(r,o){var i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.prepareSubmission(r),t.next=3,e.saveSubmission(i,a,n);case 3:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}()).then(function(){o.default.emit({name:"FAST:DATA:IMPORTED",data:{imported:!0},text:"Data was imported"})}).catch(function(e){console.log(e),n.$swal(n.$t("Import Error!"),n.$t("Your submission could not be Imported. Please check the format of your Json file."),"error")});case 2:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}()},{key:"emitNotification",value:function(e){e.$eventHub.emit("FAST-DATA_IMPORTED")}},{key:"prepareSubmission",value:function(e){return(e.id||e._id)&&(delete e.id,delete e._id),e.modified&&delete e.modified,e.owner&&delete e.owner,{data:e.data?e.data:e,redirect:!1,syncError:!1,draft:!0,trigger:"importSubmission"}}},{key:"saveSubmission",value:function(){var e=c(regeneratorRuntime.mark(function e(t,r,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.default.add({submission:t,formio:r});case 2:case"end":return e.stop()}},e,this)}));return function(t,r,n){return e.apply(this,arguments)}}()}]),e}();t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=u(r(12)),o=u(r(57)),i=u(r(58));function u(e){return e&&e.__esModule?e:{default:e}}function c(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(a,o){try{var i=t[a](o),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}("next")})}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,null,[{key:"getPlugin",value:function(e){var t=this,r=e.formio,n=e.hashField;return{priority:0,request:function(){var e=c(regeneratorRuntime.mark(function e(a){var u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("GET"!==a.method){e.next=2;break}return e.abrupt("return",o.default.handle(a));case 2:if("POST"!==a.method&&"PUT"!==a.method){e.next=7;break}return e.next=5,i.default.handle({args:a,hashField:n,formio:r});case 5:return u=e.sent,e.abrupt("return",u);case 7:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}()}}},{key:"LocalToJson",value:function(e){var t=[];return e.forEach(function(e){t.push(e.data)}),t}},{key:"getLocalTranslations",value:function(){var e=c(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.default.local().getFormTranslations();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),e}();t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(e){return e&&e.__esModule?e:{default:e}}(r(11));function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(a,o){try{var i=t[a](o),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}("next")})}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,null,[{key:"handle",value:function(){var t=o(regeneratorRuntime.mark(function t(r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(-1!==r.url.indexOf("form.io")){t.next=2;break}return t.abrupt("return",e.handleExternalAPI(r));case 2:if("form"!==r.type){t.next=4;break}return t.abrupt("return",e.handleLocalForm(r));case 4:if("select"!==r.type||-1===r.url.indexOf("form.io")){t.next=6;break}return t.abrupt("return",e.handleInternalResource(r));case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"handleExternalAPI",value:function(){return null}},{key:"handleLocalForm",value:function(){var e=o(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.default.local().get(t.formio.formId);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleInternalResource",value:function(){var e=o(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 4:if(e.sent.filter(function(e){return void 0===e.data._id})[0]){e.next=8;break}return e.abrupt("return");case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}();t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(e){return e&&e.__esModule?e:{default:e}}(r(59));function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(a,o){try{var i=t[a](o),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}("next")})}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,null,[{key:"handle",value:function(){var t=o(regeneratorRuntime.mark(function t(r){var n=r.args,a=r.hashField,o=r.formio;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("submission"!==n.type){t.next=2;break}return t.abrupt("return",e.handleSubmission({args:n,hashField:a,formio:o}));case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"handleSubmission",value:function(){var e=o(regeneratorRuntime.mark(function e(t){var r,n,o,i=t.args,u=t.hashField,c=t.formio;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=i.data,!i.data||i.data.trigger){e.next=5;break}return n={data:i.data.data,redirect:!1,draft:!1,trigger:"resourceCreation"},r=n,e.abrupt("return",null);case 5:return e.next=7,a.default.handle({submission:r,formio:c,hashField:u});case 7:return o=e.sent,e.abrupt("return",o);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}();t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=s(r(20)),o=s(r(1)),i=s(r(8)),u=s(r(22)),c=s(r(7));function s(e){return e&&e.__esModule?e:{default:e}}function l(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(a,o){try{var i=t[a](o),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}("next")})}}var f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,null,[{key:"handle",value:function(){var t=l(regeneratorRuntime.mark(function t(r){var n=r.submission,a=r.formio,o=r.hashField;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===o){t.next=2;break}return t.abrupt("return",e.storeUser({submission:n,formio:a,hashField:o}));case 2:return t.abrupt("return",e.storeSubmission({submission:n,formio:a,hashField:o}));case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"storeSubmission",value:function(){var e=l(regeneratorRuntime.mark(function e(t){var r,n=t.submission,a=t.formio;t.hashField;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.default.add({submission:n,formio:a});case 2:if(r=e.sent){e.next=5;break}return e.abrupt("return");case 5:return n.trigger&&n.trigger,n.trigger&&"formioSubmit"===n.trigger?r.isSubmit=!0:r.isSubmit=!1,c.default.emit({name:"FAST:SUBMISSION:CHANGED",data:r,text:"Draft Saved"}),e.abrupt("return",r);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"storeUser",value:function(){var e=l(regeneratorRuntime.mark(function e(t){var r,n,u=t.submission,c=t.formio;t.hashField;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.default.getLocal();case 2:return r=e.sent,u.data.hashedPassword=(0,a.default)(u.data.password,r.MD5_KEY),e.next=6,i.default.storeLocally({data:u.data,sync:!1,formio:c});case 6:return n=e.sent,e.abrupt("return",n);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}();t.default=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=i(r(20)),o=i(r(1));function i(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,null,[{key:"string",value:function(){var e=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(a,o){try{var i=t[a](o),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}("next")})}}(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.default.local().first();case 2:return r=e.sent,n="",n=(0,a.default)(t,r.MD5_KEY),e.abrupt("return",n);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}();t.default=u}])});
//# sourceMappingURL=fast-fastjs.min.js.map